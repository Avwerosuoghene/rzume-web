<div class="password-reset-container">
  <!-- Success / Failure Icon -->
  <ng-container *ngIf="activePasswordResetScreen === PassWordResetScreens.successScreen">
    <div
      class="completed_request_icon"
      [ngClass]="passwordResetCompleteIcon === IconStat.success ? 'success' : 'failed'"
    >
      <mat-icon>{{ passwordResetCompleteIcon }}</mat-icon>
    </div>
  </ng-container>

  <!-- Header -->
  <div class="auth-top_view_elements">
    <h3 *ngIf="activePasswordResetScreen === PassWordResetScreens.formScreen; else successHeader">
      Reset Password
    </h3>
    <ng-template #successHeader>
      <h3>Password Changed</h3>
      <p id="reset-complete-msg">{{ resetCompleteMessage }}</p>
    </ng-template>
  </div>

  <!-- Password Reset Form -->
  <form
    *ngIf="activePasswordResetScreen === PassWordResetScreens.formScreen"
    [formGroup]="resetPassFormGroup"
    (ngSubmit)="submitPasswordResetForm()"
  >
    <div class="form-input-container">
      <!-- Password Field -->
      <div (keyup)="validatePassword()">
        <app-form-input 
          [config]="passwordConfig" 
          [control]="resetPassFormGroup.get('password')">
        </app-form-input>
      </div>

      <!-- Password Strength Checker -->
      <div id="reset_pass_strength">
        <app-password-strength-checker></app-password-strength-checker>
      </div>

      <!-- Confirm Password Field -->
      <app-form-input 
        [config]="confirmPasswordConfig" 
        [control]="resetPassFormGroup.get('confirmPassword')">
      </app-form-input>

      <!-- Submit Button -->
      <button
        mat-flat-button
        class="form-input-confirm-button"
        [disabled]="isBtnDisabled()"
        type="submit"
        id="resetPassBtn"
      >
        <div class="button-elements">
          <app-circular-loader *ngIf="loaderIsActive"></app-circular-loader>
          <p>Reset Password</p>
        </div>
      </button>
    </div>
  </form>

  <!-- Success / Retry Buttons -->
  <ng-container *ngIf="activePasswordResetScreen === PassWordResetScreens.successScreen">
    <div class="succes_screen_btns">
      <button
        mat-flat-button
        class="reset_action_btn back_to_login"
        type="button"
        (click)="goToLogin()"
      >
        Back to Login
      </button>

      <button
        *ngIf="passwordResetCompleteIcon === 'close'"
        mat-stroked-button
        class="reset_action_btn retry_btn"
        type="button"
        (click)="goBackToForm()"
      >
        Retry Reset
      </button>
    </div>
  </ng-container>
</div>
